# General settings {{{
# set modifier
set $super Mod4
set $alt Mod1

# set font
font pango: Noto Sans 12
# }}}

# Autostart {{{
exec --no-startup-id xsettingsd &
exec --no-startup-id xrandr --output DP-3 --auto --left-of HDMI-0
exec --no-startup-id feh --bg-fill ~/.wallpaper.png
exec --no-startup-id compton -b
exec --no-startup-id i3-msg 'exec /usr/bin/pulseaudio --start'
exec --no-startup-id nm-applet
# }}}

# Layout {{{
bar {
  mode hide
  hidden_state hide

  position  top

  font pango:Noto Sans, FontAwesome 12
  strip_workspace_numbers yes

  bindsym button4 nop
  bindsym button5 nop
  bindsym button1 nop

  colors {
    background #2f343f
    statusline #2f343f
    separator #4b5262

    # colour of border, background, and text
    focused_workspace	#2f343f	#bf616a	#d8dee8
    active_workspace	#2f343f	#2f343f	#d8dee8
    inactive_workspace	#2f343f	#2f343f	#d8dee8
    urgent_workspace	#2f343f	#ebcb8b	#2f343f
  }
  status_command i3status
}

# window rules, you can find the window class using xprop
for_window [class=".*"] border pixel 2

# colour of border, background, text, indicator, and child_border
client.focused			#bf616a #2f343f #d8dee8 #bf616a #e60073
client.focused_inactive	#2f343f #2f343f #d8dee8 #2f343f #2f343f
client.unfocused		#2f343f #2f343f #d8dee8 #2f343f #2f343f
client.urgent			#2f343f #2f343f #d8dee8 #2f343f #2f343f
client.placeholder		#2f343f #2f343f #d8dee8 #2f343f #2f343f
client.background		#2f343f

# Workspaces definition {{{
# terminal
set $WS1 "1:&#xf120;"
# browser
set $WS2 "2:&#xf269;"
# mail client
set $WS3 "3:&#xf0e0;"
# watching/reading
set $WS4 "4:&#xf530;"
# gimp
set $WS5 "5:&#xf86d;"
# remote
set $WS6 "6:&#xf1e6;"
# office
set $WS7 "7:&#xf15c;"
# ide
set $WS8 "8:&#xf1c9;"
# debug
set $WS9 "9:&#xf188;"
# communication
set $WS10 "10:&#xf095;"
# games
set $WS11 "11:&#xf11b;"
# home
set $WS12 "12:&#xf015;"
# private-left
set $WS13 "13:&#xf023;L"
# private-right
set $WS14 "14:&#xf023;P"
# repository manager
set $WS15 "15:&#xf3a6;"
# docker manager
set $WS16 "16:&#xf395;"
# }}}
# }}}

# Workspace configuration {{{
workspace $WS1 output HDMI-0
workspace $WS2 output DP-3
workspace $WS3 output HDMI-0
workspace $WS4 output HDMI-0
workspace $WS5 output HDMI-0
workspace $WS6 output HDMI-0
workspace $WS7 output HDMI-0
workspace $WS8 output HDMI-0
workspace $WS9 output DP-3
workspace $WS10 output DP-3
workspace $WS11 output HDMI-0
workspace $WS12 output HDMI-0
workspace $WS13 output DP-3
workspace $WS14 output HDMI-0
workspace $WS15 output DP-3
workspace $WS16 output DP-3

assign [class="Vimiv"] $WS4
assign [class="Evince"] $WS4
focus_on_window_activation focus
# }}}

# Key bindings {{{
# start a terminal
bindsym $super+Return exec st

# start rofi
bindsym F1 exec "rofi -show drun -font 'Source Code Pro 12'"

# kill focused window
bindsym $super+c kill

# print screen
bindsym Print exec flameshot gui

# change focus
bindsym $super+h focus left
bindsym $super+j focus down
bindsym $super+k focus up
bindsym $super+l focus right

# move focused window
bindsym $super+Shift+h move left
bindsym $super+Shift+j move down
bindsym $super+Shift+k move up
bindsym $super+Shift+l move right

# split in horizontal orientation
bindsym $super+Control+e split h

# split in vertical orientation
bindsym $super+Control+v split v

# enter fullscreen mode for the focused container
bindsym $super+f fullscreen toggle

# change container layout split
bindsym $super+Control+s layout toggle split

bindsym $super+Control+w layout toggle

# toggle tiling / floating
bindsym $super+space floating toggle

# change focus between tiling / floating windows
bindsym $super+Shift+space focus mode_toggle

# switch to workspace
bindsym $super+q workspace $WS1
bindsym $super+b workspace $WS2
bindsym $super+m workspace $WS3
bindsym $super+w workspace $WS4
bindsym $super+g workspace $WS5
bindsym $super+r workspace $WS6
bindsym $super+o workspace $WS7
bindsym $super+e workspace $WS8
bindsym $super+z workspace $WS9
bindsym $super+0 workspace $WS10
bindsym $super+x workspace $WS11
bindsym $super+1 workspace $WS12
bindsym $super+v workspace $WS15
bindsym $super+d workspace $WS16

# move focused container to workspace
bindsym $super+Shift+q move container to workspace $WS1
bindsym $super+Shift+b move container to workspace $WS2
bindsym $super+Shift+m move container to workspace $WS3
bindsym $super+Shift+w move container to workspace $WS4
bindsym $super+Shift+g move container to workspace $WS5
bindsym $super+Shift+r move container to workspace $WS6
bindsym $super+Shift+o move container to workspace $WS7
bindsym $super+Shift+e move container to workspace $WS8
bindsym $super+Shift+z move container to workspace $WS9
bindsym $super+Shift+0 move container to workspace $WS10
bindsym $super+Shift+x move container to workspace $WS11
bindsym $super+Shift+1 move container to workspace $WS12
bindsym $super+Shift+v move container to workspace $WS15
bindsym $super+Shift+d move container to workspace $WS16

# Make the currently focused window a scratchpad
bindsym $super+Shift+minus move scratchpad
bindsym $super+minus scratchpad show
bindsym $super+equal [class="keepassxc"] scratchpad show
bindsym $super+n [class="screen-256color"] scratchpad show

# Safe zone
bindsym $super+s exec pactl set-sink-volume alsa_output.usb-Kingston_HyperX_Virtual_Surround_Sound_00000000-00.analog-stereo 0; exec pactl set-sink-volume alsa_output.pci-0000_01_00.1.hdmi-stereo 0; workspace $WS1; workspace $WS2
# }}}

# Modes {{{
bindsym $super+p mode "private"
mode "private" {
  bindsym l workspace $WS13; mode "default"
  bindsym r workspace $WS14; mode "default"

  bindsym Shift+l move container to workspace $WS13; mode "default"
  bindsym Shift+r move container to workspace $WS14; mode "default"

  bindsym Return mode "default"
  bindsym Escape mode "default"
}

bindsym $super+Pause mode "$mode_system"
mode "$mode_system" {
  bindsym l exec --no-startup-id i3lock --color=282828, mode "default"
  bindsym e exec --no-startup-id i3-msg exit, mode "default"
  bindsym s exec --no-startup-id i3lock --color=282828 && systemctl suspend, mode "default"
  bindsym h exec --no-startup-id i3lock --color=282828 && systemctl hibernate, mode "default"
  bindsym r exec --no-startup-id systemctl reboot, mode "default"
  bindsym p exec --no-startup-id systemctl poweroff, mode "default"

  # back to normal: Enter or Escape
  bindsym Return mode "default"
  bindsym Escape mode "default"
}

bindsym $super+a mode "$mode_audio"
# Pulse Audio controls
mode "$mode_audio" {
  bindsym i exec pactl set-sink-volume alsa_output.usb-Kingston_HyperX_Virtual_Surround_Sound_00000000-00.analog-stereo +5% #increase sound volume
  bindsym d exec pactl set-sink-volume alsa_output.usb-Kingston_HyperX_Virtual_Surround_Sound_00000000-00.analog-stereo -5% #decrease sound volume
  bindsym t exec pactl set-sink-mute alsa_output.usb-Kingston_HyperX_Virtual_Surround_Sound_00000000-00.analog-stereo toggle # mute sound

  bindsym Control+i exec pactl set-sink-volume alsa_output.pci-0000_01_00.1.hdmi-stereo +5% #increase sound volume
  bindsym Control+d exec pactl set-sink-volume alsa_output.pci-0000_01_00.1.hdmi-stereo -5% #decrease sound volume
  bindsym Control+t exec pactl set-sink-mute alsa_output.pci-0000_01_00.1.hdmi-stereo toggle # mute sound

  bindsym Escape mode "default"
}
# }}}

# Fixes {{{
for_window [class="^jetbrains-.+"][window_type=dialog] focus
# }}}
