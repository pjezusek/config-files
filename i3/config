# General settings {{{
# set modifier
set $super Mod4
set $alt Mod1

# set font
font pango: Noto Sans 12
#}}}

# Autostart {{{
exec --no-startup-id xsettingsd &
exec --no-startup-id xrandr --output DP-3 --auto --left-of HDMI-0
exec --no-startup-id feh --bg-fill ~/.wallpaper.png
exec --no-startup-id compton -b
exec --no-startup-id i3-msg 'exec /usr/bin/pulseaudio --start'
exec --no-startup-id nm-applet
#}}}

# Key bindings {{{1
# start a terminal
bindsym $super+Return exec termite

# start dmenu (a program launcher)
bindsym $super+Shift+d exec i3-dmenu-desktop --dmenu="dmenu -i -fn 'Noto Sans:size=8'"
bindsym $super+d exec rofi -lines 12 -padding 18 -width 60 -location 0 -show drun -sidebar-mode -columns 3 -font 'Noto Sans 12'
bindsym $super+Shift+w exec rofi -lines 12 -padding 18 -width 60 -location 0 -show window -sidebar-mode -columns 3 -font 'Noto Sans 12'

# kill focused window
bindsym $super+c kill

# change focus
bindsym $super+h focus left
bindsym $super+j focus down
bindsym $super+k focus up
bindsym $super+l focus right

# move focused window
bindsym $super+Shift+h move left
bindsym $super+Shift+j move down
bindsym $super+Shift+k move up
bindsym $super+Shift+l move right

# split in horizontal orientation
bindsym $super+Control+e split h

# split in vertical orientation
bindsym $super+Control+v split v

# enter fullscreen mode for the focused container
bindsym $super+f fullscreen toggle

# change container layout split
bindsym $super+Control+s layout toggle split

bindsym $super+Control+w layout toggle

# toggle tiling / floating
bindsym $super+space floating toggle

# change focus between tiling / floating windows
bindsym $super+Shift+space focus mode_toggle

# switch to workspace
bindsym $super+q workspace "terminal"
bindsym $super+b workspace "browser"
bindsym $super+m workspace "mailer"
bindsym $super+w workspace "media"
bindsym $super+g workspace "gimp"
bindsym $super+r workspace "remote"
bindsym $super+o workspace "office"
bindsym $super+i workspace "ide"
bindsym $super+v workspace "images"
bindsym $super+e workspace "pdf"

# move focused container to workspace
bindsym $super+Shift+t move container to workspace "terminal"
bindsym $super+Shift+b move container to workspace "browser"
bindsym $super+Shift+w move container to workspace "media"
jindsym $super+Shift+m move container to workspace "mailer"
jindsym $super+Shift+g move container to workspace "gimp"
bindsym $super+Shift+r move container to workspace "remote"
bindsym $super+Shift+o move container to workspace "office"
bindsym $super+Shift+i move container to workspace "ide"
bindsym $super+Shift+v move container to workspace "images"
bindsym $super+Shift+e move container to workspace "pdf"

# exit i3
bindsym $super+Shift+q exec "i3-nagbar -t warning -m 'Really, exit?' -b 'Yes' 'i3-msg exit'"

# Make the currently focused window a scratchpad
bindsym $super+Shift+minus move scratchpad
bindsym $super+minus scratchpad show
bindsym $super+equal [class="keepassxc"] scratchpad show
bindsym $super+n [class="Termite"] scratchpad show
# }}}

# Workspace configuration {{{
workspace "terminal" output HDMI-0
workspace "browser" output DP-3
workspace "mailer" output HDMI-0
workspace "remote" output HDMI-0
workspace "office" output HDMI-0
workspace "ide" output HDMI-0
workspace "images" output DP-3
workspace "media" output HDMI-0
workspace "private-left" output DP-3
workspace "private-right" output HDMI-0

assign [class="Vimiv"] images
assign [class="Evince"] pdf
focus_on_window_activation focus
#}}}

# Modes {{{
bindsym $super+p mode "private"
mode "private" {
  bindsym l workspace "private-left"; mode "default"
  bindsym r workspace "private-right"; mode "default"

  bindsym Shift+l move container to workspace "private-left"; mode "default"
  bindsym Shift+r move container to workspace "private-right"; mode "default"

  bindsym Return mode "default"
  bindsym Escape mode "default"
}

bindsym $super+Pause mode "$mode_system"
mode "$mode_system" {
  bindsym l exec --no-startup-id i3lock --color=282828, mode "default"
  bindsym e exec --no-startup-id i3-msg exit, mode "default"
  bindsym s exec --no-startup-id i3lock --color=282828 && systemctl suspend, mode "default"
  bindsym h exec --no-startup-id i3lock --color=282828 && systemctl hibernate, mode "default"
  bindsym r exec --no-startup-id systemctl reboot, mode "default"
  bindsym p exec --no-startup-id systemctl poweroff, mode "default"

  # back to normal: Enter or Escape
  bindsym Return mode "default"
  bindsym Escape mode "default"
}

# open programs
bindsym $super+x mode "$mode_launcher"
mode "$mode_launcher" {
    bindsym f exec firefox; mode "default"
    bindsym t exec thunderbird; mode "default"
    bindsym k exec keepassxc; mode "default"
    bindsym l exec libreoffice; mode "default"
    bindsym g exec gimp; mode "default"

    bindsym Escape mode "default"
    bindsym Return mode "default"
}

bindsym $super+a mode "$mode_audio"
# Pulse Audio controls
mode "$mode_audio" {
  bindsym $super+u exec pactl set-sink-volume 1 +5% #increase sound volume
  bindsym $super+i exec pactl set-sink-volume 1 -5% #decrease sound volume
  bindsym $super+m exec pactl set-sink-mute 1 toggle # mute sound
}
#}}}

# Layout {{{
bar {
  mode hide
  hidden_state hide

  position  top

  bindsym button4 nop
  bindsym button5 nop
  bindsym button1 nop

  colors {
    background #2f343f
    statusline #2f343f
    separator #4b5262

    # colour of border, background, and text
    focused_workspace	#2f343f	#bf616a	#d8dee8
    active_workspace	#2f343f	#2f343f	#d8dee8
    inactive_workspace	#2f343f	#2f343f	#d8dee8
    urgent_workspace	#2f343f	#ebcb8b	#2f343f
  }
  status_command i3status
}

# window rules, you can find the window class using xprop
for_window [class=".*"] border pixel 2

# colour of border, background, text, indicator, and child_border
client.focused			#bf616a #2f343f #d8dee8 #bf616a #e60073
client.focused_inactive	#2f343f #2f343f #d8dee8 #2f343f #2f343f
client.unfocused		#2f343f #2f343f #d8dee8 #2f343f #2f343f
client.urgent			#2f343f #2f343f #d8dee8 #2f343f #2f343f
client.placeholder		#2f343f #2f343f #d8dee8 #2f343f #2f343f
client.background		#2f343f
#}}}
